(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4043)}])},4043:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var r=t(5893),n=t(7484),l=t.n(n),c=t(5675),a=t.n(c),i=t(1664),d=t.n(i),o=t(7294);let x=e=>{let{recording:s}=e,t="https://apiv2.twitcasting.tv/users/".concat(s.screen_id,"/live/thumbnail?size=large&position=beginning"),n="https://twitcasting.tv/".concat(s.screen_id);return(0,r.jsxs)("div",{className:"mx-3 space-y-1 rounded-xl border-2 border-indigo-400 bg-slate-200 py-6 shadow-2xl",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(d(),{href:n,children:(0,r.jsx)(a(),{src:t,alt:"".concat(s.user_name,"'s thumbnail"),height:300,width:200,priority:!0,className:"rounded-xl"})})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(d(),{href:n,children:(0,r.jsxs)("div",{className:"my-2 space-y-1",children:[(0,r.jsx)("span",{className:"mx-1 block font-semibold",children:s.live_title}),(0,r.jsx)("span",{className:"mx-1 block",children:s.live_subtitle?s.live_subtitle:"-----"}),(0,r.jsxs)("span",{className:"mx-1 block text-sm font-light text-gray-600",children:[l().unix(s.start_time).format("YYYY/MM/DD HH:mm:ss")," -"," ",l()().diff(l().unix(s.start_time),"minute"),"分経過"]})]})})}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 py-3",children:[(0,r.jsx)(d(),{href:s.profile_image,children:(0,r.jsx)(a(),{src:s.profile_image,alt:"".concat(s.screen_id,"'s icon"),height:45,width:45,className:"rounded-3xl border-2 border-red-600 p-0.5"})}),(0,r.jsx)(d(),{href:n,children:(0,r.jsxs)("div",{className:"w-[150px]",children:[(0,r.jsx)("span",{className:"block truncate text-base font-semibold",children:s.user_name}),(0,r.jsxs)("span",{className:"block truncate text-sm text-gray-400",children:["@",s.screen_id]})]})})]})]})};var u=t(9008),m=t.n(u);let h=e=>{let{user:s}=e,t="https://twitcasting.tv/".concat(s.screen_id);return(0,r.jsxs)("div",{className:"space-y-1 rounded-xl border-2 border-amber-500 bg-white shadow-2xl max-lg:py-6 lg:py-4",children:[(0,r.jsxs)("div",{className:"max-w mx-auto flex items-center justify-center space-x-2 py-3",children:[(0,r.jsx)(d(),{href:t,children:(0,r.jsx)(a(),{src:s.profile_image?s.profile_image:"https://twitcasting.tv/img/twitcas_guest1_64.jpg",alt:"".concat(s.screen_id,"'s icon"),height:45,width:45,className:"rounded-3xl border-2 border-gray-500"})}),(0,r.jsx)(d(),{href:t,children:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block truncate text-base font-semibold sm:w-[120px] xl:w-[180px]",children:s.user_name}),(0,r.jsxs)("span",{className:"block truncate text-sm text-gray-400 sm:w-[120px] xl:w-[180px]",children:["@",s.screen_id]})]})})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsxs)("span",{children:["レベル ",(0,r.jsx)("span",{className:"font-semibold",children:s.level})]}),(0,r.jsxs)("span",{children:["サポーター"," ",(0,r.jsx)("span",{className:"font-semibold",children:s.supporter_count?s.supporter_count.toLocaleString():""})]})]})]})},p=async e=>{let s=await fetch("".concat(e,"/recordings")),t=await s.json();return t.recordings},j=async(e,s)=>{let t=await fetch("".concat(e,"/recordings/").concat(s),{method:"POST"}),r=await t.json();return r},f=async(e,s)=>{let t=await fetch("".concat(e,"/recordings/").concat(s),{method:"DELETE"}),r=await t.json();return r},b=async e=>{let s=await fetch("".concat(e,"/users")),t=await s.json();return t.users},g=async(e,s)=>{let t=await fetch("".concat(e,"/subscriptions/").concat(s),{method:"POST"}),r=await t.json();return r},v=async(e,s)=>{let t=await fetch("".concat(e,"/subscriptions/").concat(s),{method:"DELETE"}),r=await t.json();return r};function y(){let[e,s]=(0,o.useState)([]),[t,n]=(0,o.useState)([]),[c,a]=(0,o.useState)(!1),[i,d]=(0,o.useState)("---"),[u,y]=(0,o.useState)(""),N=(0,o.useRef)(null),w=(0,o.useRef)(null),_=(0,o.useRef)(null),[k,E]=(0,o.useState)(30);return(0,o.useEffect)(()=>{""===u&&y("http://".concat(window.location.hostname,":").concat(window.location.port)),d("----/--/-- --:--:--"),p(u).then(e=>{s(e),d(l()().format("YYYY/MM/DD HH:mm:ss"))}),b(u).then(e=>{n(e)});let e=setInterval(()=>{a(e=>!e)},1e3*k);return()=>clearInterval(e)},[c,u,k]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m(),{children:(0,r.jsx)("title",{children:"TARS-UI"})}),(0,r.jsxs)("main",{className:"mx-10 my-10 space-y-5",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)("div",{className:"w-fit items-center space-x-5 space-y-2 border-2 px-5 py-2 md:flex",children:[(0,r.jsxs)("div",{className:"space-x-3",children:[(0,r.jsx)("span",{children:"更新間隔 (秒)"}),(0,r.jsx)("input",{type:"text",ref:_,defaultValue:"30",className:"w-16 rounded-3xl border-2 border-indigo-200 bg-gray-100 px-5 py-0.5 outline-none focus:border-emerald-400"}),(0,r.jsx)("button",{className:"rounded-2xl border-2 border-violet-400 px-4 py-1.5",onClick:()=>{var e,s;let t=Number(null===(e=_.current)||void 0===e?void 0:e.value)?Number(null===(s=_.current)||void 0===s?void 0:s.value):30;E(t)},children:"設定"})]}),(0,r.jsxs)("span",{className:"inline-block font-medium",children:["最終更新: ",i]})]})}),(0,r.jsxs)("div",{className:"items-center py-5 max-lg:space-y-5 xl:flex xl:justify-between",children:[(0,r.jsxs)("h3",{className:"font-bold xl:text-xl",children:["・録画タスク (",null==e?void 0:e.length,")"]}),(0,r.jsx)("div",{className:"flex justify-center text-center",children:(0,r.jsxs)("div",{className:"justify-center md:flex md:space-x-5",children:[(0,r.jsx)("input",{type:"text",ref:N,className:"my-5 rounded-3xl border-2 border-indigo-200 bg-gray-100 px-5 py-0.5 outline-none focus:border-emerald-400"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,r.jsx)("button",{className:"my-5 rounded-2xl border-2 border-blue-400 px-4 py-1.5",onClick:()=>{var e;j(u,null===(e=N.current)||void 0===e?void 0:e.value),a(e=>!e)},children:"開始"}),(0,r.jsx)("button",{className:"my-5 rounded-2xl border-2 border-red-400 px-4 py-1.5",onClick:()=>{var e;f(u,null===(e=N.current)||void 0===e?void 0:e.value),a(e=>!e)},children:"終了"}),(0,r.jsx)("button",{className:"my-5 rounded-2xl border-2 border-violet-400 px-4 py-1.5",onClick:()=>a(e=>!e),children:"更新"})]})]})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"grid gap-5 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 lg:gap-10 xl:grid-cols-5 xl:gap-10",children:e&&e.map(e=>(0,r.jsx)(x,{recording:e},e.live_id))})}),(0,r.jsxs)("div",{className:"items-center py-5 max-lg:space-y-5 xl:flex xl:justify-between",children:[(0,r.jsxs)("h3",{className:"font-bold xl:text-xl",children:["・自動録画対象 (",null==t?void 0:t.length,")"]}),(0,r.jsx)("div",{className:"flex justify-center text-center",children:(0,r.jsxs)("div",{className:"md:flex md:space-x-5",children:[(0,r.jsx)("input",{type:"text",ref:w,className:"my-5 rounded-3xl border-2 border-indigo-200 bg-gray-100 px-5 py-0.5 outline-none focus:border-emerald-400"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,r.jsx)("button",{className:"my-5 rounded-2xl border-2 border-blue-400 px-4 py-1.5",onClick:()=>{var e;g(u,null===(e=w.current)||void 0===e?void 0:e.value),a(e=>!e)},children:"追加"}),(0,r.jsx)("button",{className:"my-5 rounded-2xl border-2 border-red-400 px-4 py-1.5",onClick:()=>{var e;v(u,null===(e=w.current)||void 0===e?void 0:e.value),a(e=>!e)},children:"削除"})]})]})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"grid gap-5 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 lg:gap-10 xl:grid-cols-5 xl:gap-x-14",children:t&&t.map(e=>(0,r.jsx)(h,{user:e},e.user_id))})})]})]})}}},function(e){e.O(0,[459,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);